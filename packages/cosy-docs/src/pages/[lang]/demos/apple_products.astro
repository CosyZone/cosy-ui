---
import {
  AppLayout,
  Container,
  Grid,
  Card,
  Heading,
  Text,
  Button,
  Badge,
} from '@coffic/cosy-ui';
import { getProductImage } from '@coffic/cosy-ui';
import { configApp } from '@/config/config.app';
import * as astroI18n from 'astro:i18n';

const currentLocale = Astro.url.pathname.split('/')[2] || 'zh-cn';
const t = (zh: string, en: string) => (currentLocale === 'zh-cn' ? zh : en);

export const getStaticPaths = async () => {
  return [{ params: { lang: 'zh-cn' } }, { params: { lang: 'en' } }];
};
---

<AppLayout
  metaConfig={{
    title: t('Apple 产品列表', 'Apple Products'),
    description: t(
      '精选 Apple 设备与配件，一站式浏览与了解。',
      'Curated Apple devices and accessories for quick browsing and discovery.'
    ),
    keywords: t(
      'iPhone, MacBook, iPad, Apple Watch, AirPods, Vision Pro',
      'iPhone, MacBook, iPad, Apple Watch, AirPods, Vision Pro'
    ),
    author: 'Cosy UI',
    robots: 'index, follow',
  }}
  showFooter={true}
  showSidebar={false}
  footerConfig={{
    siteName: 'Cosy UI',
    homeLink: configApp.homeLink,
    slogan: t('更快构建现代网站', 'Build modern sites faster'),
    company: 'Cosy UI',
    copyright: `© 2025 Cosy UI`,
    inspirationalSlogan: t(
      '打造优雅、可复用的界面',
      'Craft elegant, reusable UIs'
    ),
  }}
  headerConfig={{
    logoHref: configApp.homeLink,
    navItems: configApp.getNavItems(currentLocale),
    astroI18n: astroI18n,
  }}
  sidebarConfig={{ sidebarItems: [] }}
  mainContentConfig={{ verticalPadding: '2xl' }}>
  <Container width="xl" padding="lg" centered={true}>
    <Heading level={1} margin="lg">
      {t('Apple 产品列表', 'Apple Products')}
    </Heading>
    <Text margin="md">
      {
        t(
          '精选 Apple 设备与配件，一站式浏览与了解。',
          'Curated Apple devices and accessories for quick browsing and discovery.'
        )
      }
    </Text>

    <Grid cols={{ base: 1, md: 2, lg: 3 }} gap="lg">
      {
        [
          {
            nameZh: 'iPhone 15 Pro',
            nameEn: 'iPhone 15 Pro',
            tag: 'NEW',
            img: getProductImage({
              width: 1200,
              height: 800,
              tag: 'iphone',
              provider: 'picsum',
            }),
            descZh: '钛金属机身，A17 Pro 芯片，顶级性能与影像系统。',
            descEn:
              'Titanium design. A17 Pro chip. Top-tier performance and camera.',
          },
          {
            nameZh: 'MacBook Air (M2)',
            nameEn: 'MacBook Air (M2)',
            tag: 'HOT',
            img: getProductImage({
              width: 1200,
              height: 800,
              tag: 'macbook',
              provider: 'picsum',
            }),
            descZh: '轻薄便携，M2 芯片带来出色续航与性能。',
            descEn:
              'Ultra-thin and portable. M2 chip with great battery and performance.',
          },
          {
            nameZh: 'iPad Pro',
            nameEn: 'iPad Pro',
            tag: 'PRO',
            img: getProductImage({
              width: 1200,
              height: 800,
              tag: 'ipad',
              provider: 'picsum',
            }),
            descZh: '高刷新率屏幕与强大处理器，生产力与创作利器。',
            descEn:
              'High refresh display and powerful processor, built for creation.',
          },
          {
            nameZh: 'Apple Watch Ultra',
            nameEn: 'Apple Watch Ultra',
            tag: 'SPORT',
            img: getProductImage({
              width: 1200,
              height: 800,
              tag: 'apple watch',
              provider: 'picsum',
            }),
            descZh: '为极限运动而生，更耐用的外壳与更长续航。',
            descEn: 'Built for extremes with rugged case and longer battery.',
          },
          {
            nameZh: 'AirPods Pro',
            nameEn: 'AirPods Pro',
            tag: 'ANC',
            img: getProductImage({
              width: 1200,
              height: 800,
              tag: 'airpods',
              provider: 'picsum',
            }),
            descZh: '主动降噪与通透模式，舒适佩戴体验。',
            descEn:
              'Active Noise Cancellation and Transparency mode, comfortable fit.',
          },
          {
            nameZh: 'Vision Pro',
            nameEn: 'Vision Pro',
            tag: 'XR',
            img: getProductImage({
              width: 1200,
              height: 800,
              tag: 'vision pro',
              provider: 'picsum',
            }),
            descZh: '空间计算设备，沉浸式体验与全新交互。',
            descEn:
              'Spatial computing device with immersive experiences and new interactions.',
          },
        ].map((p) => (
          <Card
            title={t(p.nameZh, p.nameEn)}
            subtitle={t(p.descZh, p.descEn)}
            imageUrl={p.img}>
            <Badge variant="secondary">{p.tag}</Badge>
            <Button variant="primary">{t('了解更多', 'Learn more')}</Button>
          </Card>
        ))
      }
    </Grid>
  </Container>
</AppLayout>
