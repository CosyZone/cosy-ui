---
/**
 * @component ProductHero
 *
 * @description
 * ProductHero 组件用于展示单个产品的详细信息，采用苹果风格的大图展示设计。
 * 支持左右交替布局、标签数组、价格显示和操作按钮。
 * 适用于产品详情页、产品展示页面等场景。
 *
 * @design
 * 设计理念：
 * 1. 大图展示 - 突出产品图片，采用高质量大图展示
 * 2. 交替布局 - 支持左右交替布局，增加视觉层次
 * 3. 信息层次 - 清晰的信息层次：标签、标题、描述、价格、按钮
 * 4. 苹果风格 - 采用苹果官网的简洁、优雅设计风格
 * 5. 响应式设计 - 在不同设备上都能良好展示
 *
 * @usage
 * 基本用法：
 * ```astro
 * <ProductHero
 *   name="极简手机"
 *   description="纯净体验，回归本质"
 *   image="/images/products/phone.jpg"
 *   highlight="¥6,999"
 *   labels={["新品"]}
 * />
 * ```
 *
 * 右对齐布局：
 * ```astro
 * <ProductHero
 *   name="智能手表"
 *   description="健康生活，简约开始"
 *   image="/images/products/watch.jpg"
 *   highlight="¥2,999"
 *   labels={["热卖", "直降 500"]}
 *   align="right"
 * />
 * ```
 *
 * 自定义背景色：
 * ```astro
 * <ProductHero
 *   name="无线耳机"
 *   description="纯净音质，无感佩戴"
 *   image="/images/products/earbuds.jpg"
 *   highlight="¥1,299"
 *   background="gradient-sky"
 * />
 * ```
 *
 * 自定义操作区（使用 actions 插槽）：
 * ```astro
 * <ProductHero
 *   name="极简手机"
 *   description="纯净体验，回归本质"
 *   image="/images/products/phone.jpg"
 *   highlight="¥6,999">
 *   <div slot="actions" style="display:flex; gap:1rem;">
 *     <a href="#buy" class="btn btn-primary">立即购买</a>
 *     <a href="#learn" class="btn btn-outline">了解更多</a>
 *   </div>
 * </ProductHero>
 * ```
 */

import { Badge, Heading, Text, Image, Container } from '../../index-astro';
import '../../style.ts';
import type { ImageSource } from '../image/image.ts';
import type { BackgroundColor } from '../../src/common/backgrounds';

// Props 按字母顺序（A-Z）
export interface Props {
  /**
   * 布局对齐方式
   * - left: 左对齐（默认）
   * - right: 右对齐
   */
  align?: 'left' | 'right';
  /**
   * 背景色类型
   * 使用预定义的背景色类型，如 'primary', 'base-200', 'gradient-sky' 等
   */
  background?: BackgroundColor;
  /**
   * 自定义类名
   */
  class?: string;
  /**
   * 产品描述
   */
  description: string;
  /**
   * 产品图片
   */
  image: ImageSource;
  /**
   * 标签文案列表。可传多个，如 ["限时优惠", "热销"]
   */
  labels?: string[];
  /**
   * 产品名称
   */
  name: string;
  /**
   * 高亮文案（价格、宣传语等）
   */
  highlight?: string;
}

const {
  name,
  description,
  image,
  highlight,
  labels = [],
  align = 'left',
  background,
  class: className = '',
} = Astro.props;

// 根据对齐方式决定布局方向
const isRightAlign = align === 'right';
const gridDirection = isRightAlign ? 'direction: rtl;' : '';
const contentDirection = isRightAlign ? 'direction: ltr;' : '';
---

<Container
  width="full"
  background={background || 'base-100'}
  padding="xl"
  class={className}>
  <Container width="xl">
    <div
      style={`display: grid; grid-template-columns: 1fr 1fr; gap: 4rem; align-items: center; ${gridDirection}`}>
      <!-- 内容区域 -->
      <div style={contentDirection}>
        <!-- 标签列表 -->
        {
          labels && labels.length > 0 && (
            <div class="cosy:flex cosy:flex-wrap cosy:gap-2 cosy:mb-4">
              {labels.map((label) => (
                <Badge variant="primary">{label}</Badge>
              ))}
            </div>
          )
        }

        <!-- 产品标题 -->
        <Heading level={2} size="4xl" class="cosy:mb-4 cosy:font-thin">
          {name}
        </Heading>

        <!-- 产品描述 -->
        <Text
          size="xl"
          class="cosy:text-base-content/70 cosy:mb-6 cosy:font-light">
          {description}
        </Text>

        <!-- 高亮文案（价格/标语等） -->
        {
          highlight && (
            <div style="display: flex; gap: 1rem; align-items: center; margin-bottom: 2rem;">
              <Text size="2xl" class="cosy:font-thin">
                {highlight}
              </Text>
            </div>
          )
        }

        <!-- 自定义操作区插槽 -->
        <div style="display: flex; gap: 1rem;">
          <slot name="actions" />
        </div>
      </div>

      <!-- 图片区域 -->
      <div>
        <div
          style="width: 100%; height: auto; border-radius: 1rem; box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25); overflow: hidden;">
          <Image
            src={image}
            alt={name}
            width={800}
            height={600}
            class="cosy:w-full cosy:h-auto"
          />
        </div>
      </div>
    </div>
  </Container>
</Container>
