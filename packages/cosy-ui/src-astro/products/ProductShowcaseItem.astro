---
/**
 * @component ProductShowcaseItem
 *
 * @description
 * ProductShowcaseItem 组件用于展示单个产品的详细信息，采用苹果风格的大图展示设计。
 * 支持左右交替布局、新品标签、价格显示和操作按钮。
 * 适用于产品详情页、产品展示页面等场景。
 *
 * @design
 * 设计理念：
 * 1. 大图展示 - 突出产品图片，采用高质量大图展示
 * 2. 交替布局 - 支持左右交替布局，增加视觉层次
 * 3. 信息层次 - 清晰的信息层次：标签、标题、描述、价格、按钮
 * 4. 苹果风格 - 采用苹果官网的简洁、优雅设计风格
 * 5. 响应式设计 - 在不同设备上都能良好展示
 *
 * @usage
 * 基本用法：
 * ```astro
 * <ProductShowcaseItem
 *   name="极简手机"
 *   description="纯净体验，回归本质"
 *   image="/images/products/phone.jpg"
 *   price="¥6,999"
 *   isNew={true}
 *   buyNowText="立即购买"
 *   learnMoreText="了解更多"
 * />
 * ```
 *
 * 右对齐布局：
 * ```astro
 * <ProductShowcaseItem
 *   name="智能手表"
 *   description="健康生活，简约开始"
 *   image="/images/products/watch.jpg"
 *   price="¥2,999"
 *   isNew={false}
 *   align="right"
 *   buyNowText="立即购买"
 *   learnMoreText="了解更多"
 * />
 * ```
 *
 * 自定义背景色：
 * ```astro
 * <ProductShowcaseItem
 *   name="无线耳机"
 *   description="纯净音质，无感佩戴"
 *   image="/images/products/earbuds.jpg"
 *   price="¥1,299"
 *   backgroundColor="#f8fafc"
 *   buyNowText="立即购买"
 *   learnMoreText="了解更多"
 * />
 * ```
 */

import {
  Badge,
  Button,
  Heading,
  Text,
  Image,
  Container,
} from '../../index-astro';
import '../../style.ts';
import type { ImageSource } from '../image/image.ts';

export interface Props {
  /**
   * 产品名称
   */
  name: string;
  /**
   * 产品描述
   */
  description: string;
  /**
   * 产品图片
   */
  image: ImageSource;
  /**
   * 产品价格
   */
  price: string;
  /**
   * 是否为新品
   */
  isNew?: boolean;
  /**
   * 布局对齐方式
   * - left: 左对齐（默认）
   * - right: 右对齐
   */
  align?: 'left' | 'right';
  /**
   * 背景色
   * 支持任意CSS颜色值
   */
  backgroundColor?: string;
  /**
   * 背景类（推荐）
   * 传入 daisyUI 背景类名，如 cosy:bg-base-200
   */
  backgroundClass?: string;
  /**
   * 购买按钮文本
   */
  buyNowText?: string;
  /**
   * 了解更多按钮文本
   */
  learnMoreText?: string;
  /**
   * 新品标签文本
   */
  newLabelText?: string;
  /**
   * 购买按钮点击事件
   */
  onBuyNow?: () => void;
  /**
   * 了解更多按钮点击事件
   */
  onLearnMore?: () => void;
  /**
   * 自定义类名
   */
  class?: string;
}

const {
  name,
  description,
  image,
  price,
  isNew = false,
  align = 'left',
  backgroundColor,
  backgroundClass,
  buyNowText = '立即购买',
  learnMoreText = '了解更多',
  newLabelText = '新品',
  onBuyNow,
  onLearnMore,
  class: className = '',
} = Astro.props;

// 根据对齐方式决定布局方向
const isRightAlign = align === 'right';
const gridDirection = isRightAlign ? 'direction: rtl;' : '';
const contentDirection = isRightAlign ? 'direction: ltr;' : '';
---

<div
  style={`padding: 6rem 0;${!backgroundClass && backgroundColor ? ` background: ${backgroundColor};` : ''}`}
  class={`${backgroundClass ?? 'cosy:bg-base-100'} ${className}`}>
  <Container width="xl">
    <div
      style={`display: grid; grid-template-columns: 1fr 1fr; gap: 4rem; align-items: center; ${gridDirection}`}>
      <!-- 内容区域 -->
      <div style={contentDirection}>
        <!-- 新品标签 -->
        {
          isNew && (
            <div style="margin-bottom: 1rem;">
              <Badge variant="primary" class="cosy:mb-4">
                {newLabelText}
              </Badge>
            </div>
          )
        }

        <!-- 产品标题 -->
        <Heading level={2} size="4xl" class="cosy:mb-4 cosy:font-thin">
          {name}
        </Heading>

        <!-- 产品描述 -->
        <Text
          size="xl"
          class="cosy:text-base-content/70 cosy:mb-6 cosy:font-light">
          {description}
        </Text>

        <!-- 价格 -->
        <div
          style="display: flex; gap: 1rem; align-items: center; margin-bottom: 2rem;">
          <Text size="2xl" class="cosy:font-thin">
            {price}
          </Text>
        </div>

        <!-- 操作按钮 -->
        <div style="display: flex; gap: 1rem;">
          <Button variant="primary" size="lg" onclick={onBuyNow}>
            {buyNowText}
          </Button>
          <Button variant="outline" size="lg" onclick={onLearnMore}>
            {learnMoreText}
          </Button>
        </div>
      </div>

      <!-- 图片区域 -->
      <div>
        <div
          style="width: 100%; height: auto; border-radius: 1rem; box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25); overflow: hidden;">
          <Image
            src={image}
            alt={name}
            width={800}
            height={600}
            class="cosy:w-full cosy:h-auto"
          />
        </div>
      </div>
    </div>
  </Container>
</div>
