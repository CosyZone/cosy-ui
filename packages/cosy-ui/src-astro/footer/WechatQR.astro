---



/**
 * @component WechatQR
 *
 * @description
 * WechatQR 组件用于显示微信二维码，当用户悬停在微信图标上时显示二维码图片。
 * 这是一个内部子组件，专门用于 Footer 组件的微信二维码展示。
 *
 * @design
 * 设计理念：
 * 1. 悬停交互 - 通过悬停显示二维码，提供良好的用户体验
 * 2. 视觉层次 - 二维码以工具提示的形式出现，不干扰主要内容
 * 3. 响应式设计 - 在不同屏幕尺寸下保持良好的显示效果
 * 4. 可访问性 - 提供适当的 aria 标签和键盘支持
 *
 * @usage
 * 内部使用示例：
 * ```astro
 * <WechatQR
 *   qrSrc="/images/wechat-qr.png"
 *   size="24px"
 *   color="#07C160"
 * />
 * ```
 *
 * 使用本地图片：
 * ```astro
 * import qrImage from '/images/wechat-qr.png';
 * <WechatQR
 *   qrSrc={qrImage}
 * />
 * ```
 *
 * @props
 * @prop {ImageSource} qrSrc - 微信二维码图片源，支持本地图片或远程URL
 * @prop {string} [size='24px'] - 微信图标大小
 * @prop {string} [color='#07C160'] - 微信图标颜色
 * @prop {string} [class=''] - 自定义类名
 *
 * @accessibility
 * - 使用语义化HTML结构
 * - 二维码图片包含alt属性
 * - 支持键盘导航
 * - 提供适当的aria标签
 */

import { Image, SocialIcon } from '../../index-astro';
import type { ImageSource } from '../image/types';

interface Props {
    /**
     * 微信二维码图片源，支持本地图片或远程URL
     */
    qrSrc: ImageSource;

    /**
     * 微信图标大小
     * @default "24px"
     */
    size?: string;

    /**
     * 微信图标颜色
     * @default "#07C160"
     */
    color?: string;

    /**
     * 自定义类名
     */
    class?: string;
}

const {
    qrSrc,
    size = '24px',
    color = '#07C160',
    class: className = '',
} = Astro.props;

// 固定的 alt 文本
const qrAlt = '微信二维码';
---

<div class={`cosy:relative ${className}`}>
    <!-- 微信图标 -->
    <div
        class="cosy:flex cosy:items-center cosy:justify-center cosy:group cosy:cursor-pointer">
        <SocialIcon platform="wechat" :size="size" :color="color" />
    </div>

    <!-- 二维码悬停显示 -->
    <div
        class="cosy:absolute cosy:bottom-full cosy:left-1/2 cosy:transform cosy:-translate-x-1/2 cosy:mb-2 cosy:opacity-0 cosy:group-hover:opacity-100 cosy:transition-opacity cosy:duration-300 cosy:z-50 cosy:min-w-56">
        <div
            class="cosy:bg-white cosy:rounded-lg cosy:shadow-lg cosy:p-3 cosy:border cosy:border-gray-200 cosy:min-w-56">
            <Image
                src={qrSrc}
                alt={qrAlt}
                width={200}
                height={200}
                class="cosy:w-56 cosy:h-56"
                objectFit="contain"
                rounded="lg"
                shadow="none"
                border="none"
                hover="none"
                transition="none"
                loading="eager"
                showPlaceholder={false}
                showError={true}
            />
        </div>
        <!-- 小三角形指示器 -->
        <div
            class="cosy:absolute cosy:top-full cosy:left-1/2 cosy:transform cosy:-translate-x-1/2 cosy:w-0 cosy:h-0 cosy:border-l-4 cosy:border-r-4 cosy:border-t-4 cosy:border-l-transparent cosy:border-r-transparent cosy:border-t-white">
        </div>
    </div>
</div>
