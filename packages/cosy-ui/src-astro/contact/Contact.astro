---
/**
 * @component Contact
 *
 * @description
 * Contact 组件用于展示企业或个人的联系信息，支持多种联系方式（邮件、电话、地址）和社交媒体链接。
 * 组件设计简洁专业，适合在企业网站的联系页面、页脚或关于我们页面中使用。
 *
 * @usage
 * 基本用法：
 * ```astro
 * <Contact
 *   email="contact@company.com"
 *   phone="+1 (555) 123-4567"
 *   address="123 Business St, City, State 12345"
 * />
 * ```
 *
 * 带社交媒体链接：
 * ```astro
 * <Contact
 *   email="contact@company.com"
 *   phone="+1 (555) 123-4567"
 *   address="123 Business St, City, State 12345"
 *   github="https://github.com/company"
 *   twitter="https://twitter.com/company"
 *   facebook="https://facebook.com/company"
 * />
 * ```
 *
 * 带标题和描述：
 * ```astro
 * <Contact
 *   title="联系我们"
 *   description="欢迎随时与我们取得联系"
 *   email="contact@company.com"
 *   phone="+1 (555) 123-4567"
 * />
 * ```
 *
 * 紧凑模式：
 * ```astro
 * <Contact
 *   email="contact@company.com"
 *   phone="+1 (555) 123-4567"
 *   compact
 * />
 * ```
 *
 * @props
 * @param {string} [address] - 地址信息
 * @param {string} [class] - 自定义CSS类，可用于覆盖默认样式
 * @param {boolean} [compact] - 是否使用紧凑模式
 * @param {string} [description] - 联系信息描述
 * @param {string} [email] - 电子邮件地址
 * @param {string} [facebook] - Facebook链接
 * @param {string} [github] - GitHub链接
 * @param {string} [linkedin] - LinkedIn链接
 * @param {string} [phone] - 电话号码
 * @param {string} [title] - 联系信息标题
 * @param {string} [twitter] - Twitter链接
 * @param {string} [website] - 网站链接
 *
 * @slots
 * @slot default - 额外的联系信息内容
 */

import '../../style.ts';
import {
  FacebookIcon,
  GithubIcon,
  LinkedinIcon,
  MailIcon,
  MapPinIcon,
  PhoneIcon,
  TwitterIcon,
  WebsiteIcon,
} from '../icons';

interface Props {
  address?: string;
  class?: string;
  compact?: boolean;
  description?: string;
  email?: string;
  facebook?: string;
  github?: string;
  linkedin?: string;
  phone?: string;
  title?: string;
  twitter?: string;
  website?: string;
}

const {
  address,
  class: className = '',
  compact,
  description,
  email,
  facebook,
  github,
  linkedin,
  phone,
  title,
  twitter,
  website,
} = Astro.props;

// 构建联系信息容器样式
const contactClasses = [
  'cosy:card',
  'cosy:w-full',
  'cosy:bg-base-100',
  'cosy:shadow-lg',
  compact ? 'cosy:card-compact' : '',
  className,
]
  .filter(Boolean)
  .join(' ');

// 内容区域的padding
const contentPadding = compact ? 'cosy:p-4' : 'cosy:p-6';

// 联系信息项的样式
const contactItemClass =
  'cosy:flex cosy:items-center cosy:gap-3 cosy:mb-4 last:cosy:mb-0';
const iconClass = 'cosy:w-5 cosy:h-5 cosy:text-primary cosy:flex-shrink-0';
const linkClass =
  'cosy:link cosy:link-hover cosy:text-base-content cosy:no-underline hover:cosy:text-primary cosy:transition-colors';

// 社交媒体链接样式
const socialLinksClass =
  'cosy:flex cosy:gap-4 cosy:mt-6 cosy:pt-4 cosy:border-t cosy:border-base-300';
const socialLinkClass =
  'cosy:btn cosy:btn-ghost cosy:btn-circle cosy:btn-sm cosy:text-base-content hover:cosy:text-primary hover:cosy:bg-primary/10';
---

<div class={contactClasses}>
  <div class={`cosy:card-body ${contentPadding}`}>
    {
      title && (
        <h2 class="cosy:card-title cosy:text-2xl cosy:font-bold cosy:mb-2">
          {title}
        </h2>
      )
    }

    {
      description && (
        <p class="cosy:text-base-content/70 cosy:mb-6">{description}</p>
      )
    }

    <div class="cosy:space-y-0">
      {
        address && (
          <div class={contactItemClass}>
            <MapPinIcon class={iconClass} />
            <span class="cosy:text-base-content">{address}</span>
          </div>
        )
      }

      {
        email && (
          <div class={contactItemClass}>
            <MailIcon class={iconClass} />
            <a href={`mailto:${email}`} class={linkClass}>
              {email}
            </a>
          </div>
        )
      }

      {
        facebook && (
          <div class={contactItemClass}>
            <FacebookIcon class={iconClass} />
            <a
              href={facebook}
              target="_blank"
              rel="noopener noreferrer"
              class={linkClass}>
              Facebook
            </a>
          </div>
        )
      }

      {
        github && (
          <div class={contactItemClass}>
            <GithubIcon class={iconClass} />
            <a
              href={github}
              target="_blank"
              rel="noopener noreferrer"
              class={linkClass}>
              GitHub
            </a>
          </div>
        )
      }

      {
        linkedin && (
          <div class={contactItemClass}>
            <LinkedinIcon class={iconClass} />
            <a
              href={linkedin}
              target="_blank"
              rel="noopener noreferrer"
              class={linkClass}>
              LinkedIn
            </a>
          </div>
        )
      }

      {
        phone && (
          <div class={contactItemClass}>
            <PhoneIcon class={iconClass} />
            <a href={`tel:${phone}`} class={linkClass}>
              {phone}
            </a>
          </div>
        )
      }

      {
        twitter && (
          <div class={contactItemClass}>
            <TwitterIcon class={iconClass} />
            <a
              href={twitter}
              target="_blank"
              rel="noopener noreferrer"
              class={linkClass}>
              Twitter
            </a>
          </div>
        )
      }

      {
        website && (
          <div class={contactItemClass}>
            <WebsiteIcon class={iconClass} />
            <a
              href={website}
              target="_blank"
              rel="noopener noreferrer"
              class={linkClass}>
              {website.replace(/^https?:\/\//, '')}
            </a>
          </div>
        )
      }
    </div>

    {
      Astro.slots.has('default') && (
        <div class="cosy:mt-4">
          <slot />
        </div>
      )
    }

    {
      (github || twitter || facebook || linkedin) && (
        <div class={socialLinksClass}>
          {github && (
            <a
              href={github}
              target="_blank"
              rel="noopener noreferrer"
              class={socialLinkClass}
              title="GitHub">
              <GithubIcon class="cosy:w-5 cosy:h-5" />
            </a>
          )}

          {twitter && (
            <a
              href={twitter}
              target="_blank"
              rel="noopener noreferrer"
              class={socialLinkClass}
              title="Twitter">
              <TwitterIcon class="cosy:w-5 cosy:h-5" />
            </a>
          )}

          {facebook && (
            <a
              href={facebook}
              target="_blank"
              rel="noopener noreferrer"
              class={socialLinkClass}
              title="Facebook">
              <FacebookIcon class="cosy:w-5 cosy:h-5" />
            </a>
          )}

          {linkedin && (
            <a
              href={linkedin}
              target="_blank"
              rel="noopener noreferrer"
              class={socialLinkClass}
              title="LinkedIn">
              <LinkedinIcon class="cosy:w-5 cosy:h-5" />
            </a>
          )}
        </div>
      )
    }
  </div>
</div>
